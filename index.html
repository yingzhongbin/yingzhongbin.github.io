<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>应忠彬的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="应忠彬的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="应忠彬的博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="应忠彬的博客">
  
    <link rel="alternate" href="/atom.xml" title="应忠彬的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">应忠彬的博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Vue的三种通信方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/08/Vue的三种通信方法/" class="article-date">
  <time datetime="2018-08-08T09:18:56.000Z" itemprop="datePublished">2018-08-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/08/Vue的三种通信方法/">Vue的三种通信方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="父子通信"><a href="#父子通信" class="headerlink" title="父子通信"></a>父子通信</h1><p>vue的父子通信是有层级关系的，所以互相通信的方式也不一样。总结起来就是：prop向下传递，事件向上传递。父级组件通过prop向子级组件发送数据，子级组件通过事件给父级组件发送消息。下面贴出代码。</p>
<p>子级组件代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&quot;child&quot;,&#123;</span><br><span class="line">    props:[&quot;visible&quot;],</span><br><span class="line">    template:`</span><br><span class="line">        &lt;div v-show=&quot;visible&quot;&gt;</span><br><span class="line">            我是子级组件</span><br><span class="line">            &lt;button @click=&quot;$emit(&apos;close&apos;)&quot;&gt;关闭&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    `</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>父级组件代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var app = new Vue(&#123;</span><br><span class="line">    el: &apos;#app&apos;,</span><br><span class="line">    data: &#123;</span><br><span class="line">        visible:false</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>HTML代码:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;button @click=&quot;visible=true&quot;&gt;打开&lt;/button&gt;</span><br><span class="line">  &lt;child @close=&quot;visible=false&quot; :visible=&quot;visible&quot;&gt;&lt;/child&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>父级组件通过props向子级组件传递visible变量，从而控制子级组件child是否显示。子级组件通过向父级组件发送事件<code>$emit(&#39;close’)</code>，通知父级组件修改visible变量，从而控制自己隐藏。</p>
<h1 id="爷孙通信"><a href="#爷孙通信" class="headerlink" title="爷孙通信"></a>爷孙通信</h1><p>有了父子组件通信的基础，爷孙组件通信就易于理解了。代码如下。</p>
<p>孙级组件代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&quot;grandchild&quot;,&#123;</span><br><span class="line">    template:`</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            我是孙级组件</span><br><span class="line">            &lt;button @click=&quot;$emit(&apos;close&apos;)&quot;&gt;关闭&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    `</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>父级组件代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&quot;child&quot;,&#123;</span><br><span class="line">    props:[&quot;visible&quot;],</span><br><span class="line">    template:`</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            我是父级组件</span><br><span class="line">            &lt;grandchild v-show=&quot;visible&quot; @close=&quot;$emit(&apos;close&apos;)&quot;&gt;&lt;/grandchild&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    `</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>爷级组件代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var app = new Vue(&#123;</span><br><span class="line">    el: &apos;#app&apos;,</span><br><span class="line">    data: &#123;</span><br><span class="line">        message: &apos;爷级组件&apos;,</span><br><span class="line">        visible:false</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>HTML代码:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;button @click=&quot;visible=true&quot;&gt;打开&lt;/button&gt;</span><br><span class="line">  &lt;child :visible=&quot;visible&quot; @close=&quot;visible=false&quot;&gt;&lt;/child&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>总结起来还是那句话：prop向下传递，事件向上传递。但爷级组件无法直接控制孙级组件。只能通过<code>props:[&quot;visible&quot;]</code>向子级组件发送数据，子级组件再将数据传给孙级组件，通过<code>v-show=&quot;visible&quot;</code>实现控制孙级组件的目的。孙级组件通过事件<code>@click=&quot;$emit(&#39;close&#39;)&quot;</code>给父级组件发送消息，父级组件再通过事件<code>@click=&quot;$emit(&#39;close&#39;)&quot;</code>给爷级组件发送消息，爷级组件响应事件<code>@close=&quot;visible=false”</code>，从而修改数据。</p>
<h1 id="兄弟通信"><a href="#兄弟通信" class="headerlink" title="兄弟通信"></a>兄弟通信</h1><p>兄弟通信的原理与上所述不同。是通过事件发布、订阅模式来进行通信的。</p>
<p>首先需要一个Vue实例<br><code>var bus = new Vue()</code>作为兄弟组件的通信渠道。</p>
<p>兄组件代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&quot;brotherelder&quot;,&#123;</span><br><span class="line">    template:`</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            我是大哥</span><br><span class="line">            &lt;button @click=&quot;callYoung&quot;&gt;通知二弟&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    `,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        callYoung()&#123;</span><br><span class="line">            alert(&quot;通知弟弟&quot;);</span><br><span class="line">            bus.$emit(&quot;callYoung&quot;,&quot;弟，妈喊你吃饭了&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted()&#123;</span><br><span class="line">        bus.$on(&quot;callElder&quot;,()=&gt;&#123;</span><br><span class="line">            alert(&quot;哥知道了，我去吃饭了&quot;)</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>弟组件代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&quot;brotheryounger&quot;,&#123;</span><br><span class="line">    template:`</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            我是二弟</span><br><span class="line">            &lt;button @click=&quot;callElder&quot;&gt;通知哥哥&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    `,</span><br><span class="line">    methods:&#123;</span><br><span class="line">        callElder()&#123;</span><br><span class="line">            alert(&quot;通知哥哥&quot;);</span><br><span class="line">            bus.$emit(&quot;callElder&quot;,&quot;哥，妈喊你吃饭了&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted()&#123;</span><br><span class="line">        bus.$on(&quot;callYoung&quot;,()=&gt;&#123;</span><br><span class="line">            alert(&quot;知道了，我去吃饭了&quot;)</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>再实例化挂载点，就可以实现通信了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var app = new Vue(&#123;</span><br><span class="line">    el: &apos;#app&apos;,</span><br><span class="line">    data: &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>总结：兄弟组件通过vue的实例bus来发布事件<code>·bus.$emit(&quot;callElder&quot;,&quot;哥，妈喊你吃饭了”)</code>、再通过订阅事件<code>bus.$on(&quot;callYoung&quot;,()=&gt;{alert(&quot;知道了，我去吃饭了&quot;)})</code>，来实现兄弟组件的通信。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/08/08/Vue的三种通信方法/" data-id="cjkkx9pj00003tlf4oh34702z" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-icon的各种做法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/09/icon的各种做法/" class="article-date">
  <time datetime="2018-06-09T02:34:21.000Z" itemprop="datePublished">2018-06-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/09/icon的各种做法/">icon的各种做法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>img 法</p>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;xxx.png&quot; alt=&quot;微博&quot;&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>background 法</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.icon.weibo&#123;</span><br><span class="line">   	background-image:url(./weibo.png);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>background 合一法</p>
<p> 什么是<a href="https://baike.baidu.com/item/CSS%20Sprite" target="_blank" rel="noopener">css sprites 雪碧图</a>?</p>
<p> 使用<a href="http://css.spritegen.com/" target="_blank" rel="noopener">css sprites generator 雪碧图生成器</a></p>
<p> 复制粘贴YOUR CSS，YOUR HTML里的代码，并下载对应的雪碧图，即可使用雪碧图。</p>
</li>
<li><p>unicode引用</p>
<p>点击<a href="http://www.iconfont.cn/" target="_blank" rel="noopener">阿里巴巴矢量图标库</a>，选择对应的图标放入仓库。</p>
<blockquote>
<p>unicode是字体在网页端最原始的应用方式，特点是：</p>
<ul>
<li>兼容性最好，支持ie6+，及所有现代浏览器。</li>
<li>支持按字体的方式去动态调整图标大小，颜色等等。</li>
<li>但是因为是字体，所以不支持多色。只能使用平台里单色的图标，就算项目里有多色图标也会自动去色。</li>
</ul>
</blockquote>
<blockquote>
<p>unicode使用步骤如下：</p>
<ul>
<li>第一步：拷贝项目下面生成的font-face</li>
<li>第二步：定义使用iconfont的样式</li>
<li>第三步：挑选相应图标并获取字体编码，应用于页面<br><code>&lt;i class=&quot;iconfont&quot;&gt;&amp;#x33;&lt;/i&gt;</code></li>
</ul>
</blockquote>
</li>
<li><p>font-class引用 </p>
<p>font-class是unicode使用方式的一种变种，主要是解决unicode书写不直观，语意不明确的问题。与unicode使用方式相比，具有如下特点：</p>
<ul>
<li>兼容性良好，支持ie8+，及所有现代浏览器。</li>
<li>相比于unicode语意明确，书写更直观。可以很容易分辨这个icon是什么。</li>
<li>因为使用class来定义图标，所以当要替换图标时，只需要修改class里面的unicode引用。</li>
<li>不过因为本质上还是使用的字体，所以多色图标还是不支持的。<blockquote>
<p>使用步骤如下：</p>
<ul>
<li>第一步：拷贝项目下面生成的fontclass代码：<br><code>//at.alicdn.com/t/font_8d5l8fzk5b87iudi.css</code></li>
<li>第二步：挑选相应图标并获取类名，应用于页面：<br><code>&lt;i class=&quot;iconfont icon-xxx&quot;&gt;&lt;/i&gt;</code></li>
</ul>
</blockquote>
</li>
</ul>
</li>
<li><p>SVG 法（symbol引用）</p>
<blockquote>
<p>这是一种全新的使用方式，应该说这才是未来的主流，也是平台目前推荐的用法。相关介绍可以参考这篇文章 这种用法其实是做了一个svg的集合，与上面两种相比具有如下特点：</p>
</blockquote>
<blockquote>
<ul>
<li>支持多色图标了，不再受单色限制。</li>
<li>通过一些技巧，支持像字体那样，通过font-size,color来调整样式。</li>
<li>兼容性较差，支持 ie9+,及现代浏览器。</li>
<li>浏览器渲染svg的性能一般，还不如png。<br>使用步骤如下：</li>
</ul>
</blockquote>
<blockquote>
<p>第一步：拷贝项目下面生成的symbol代码：<br> <code>//at.alicdn.com/t/font_8d5l8fzk5b87iudi.js</code></p>
</blockquote>
<blockquote>
<p>第二步：加入通用css代码（引入一次就行）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">    .icon &#123;</span><br><span class="line">       width: 1em; height: 1em;</span><br><span class="line">       vertical-align: -0.15em;</span><br><span class="line">       fill: currentColor;</span><br><span class="line">       overflow: hidden;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p> 第三步：挑选相应图标并获取类名，应用于页面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg class=&quot;icon&quot; aria-hidden=&quot;true&quot;&gt;</span><br><span class="line">    &lt;use xlink:href=&quot;#icon-xxx&quot;&gt;&lt;/use&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>新手慎用：「CSS 就是干」法<br>使用css手绘icon，可见<a href="http://cssicon.space/#/" target="_blank" rel="noopener">达人网站</a></p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/09/icon的各种做法/" data-id="cjkkx9pk6000btlf4k0welant" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="js-登录注册与Cookie" class="article article-type-js" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/25/登录注册与Cookie/" class="article-date">
  <time datetime="2018-05-25T02:51:42.000Z" itemprop="datePublished">2018-05-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/25/登录注册与Cookie/">登录注册与Cookie</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="JS-登录注册与Cookie"><a href="#JS-登录注册与Cookie" class="headerlink" title="JS 登录注册与Cookie"></a>JS 登录注册与Cookie</h1><p>前端往往对后端的操作感到迷惑和神秘。虽然以前编辑过耍票性质的网站，对后端有一定了解，但对HTTP和状态码等内容还是不熟悉。但那段经历还是让我能更好的理解后端操作。</p>
<p>接下来，我将详细讲述JS的登录注册与Cookie内容。<br>登录注册容易理解，Cookie有什么用呢？Cookie能始终为浏览者提供稳定的信息，Cookie存储了数据，不需要持续与服务器交互GET相同的信息。</p>
<p>首先，需要验证是否已有Cookie存在，若无，则调到登录/注册界面。第三步会发送Cookie。</p>
<p>第一步：注册页面发送POST请求<br>响应成功，打印响应内容，反之，提示邮箱格式错误</p>
<p>代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$.post(&apos;/sign_up&apos;, hash)</span><br><span class="line">    .then((response) =&gt; &#123;</span><br><span class="line">        console.log(response)</span><br><span class="line">    &#125;, (request) =&gt; &#123;</span><br><span class="line">        let &#123; errors &#125; = request.responseJSON</span><br><span class="line">        if (errors.email &amp;&amp; errors.email === &apos;invalid&apos;) &#123;</span><br><span class="line">            $form.find(&apos;[name=&quot;email&quot;]&apos;).siblings(&apos;.error&apos;)</span><br><span class="line">                .text(&apos;邮箱格式错误&apos;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></p>
<p>server服务器响应</p>
<ul>
<li>1.将得到信息拼接到一起，readBody()</li>
<li>2.将得到的信息拆分到hash中。检查，如果邮箱无@符号，返回错误信息：”email”: “invalid”。</li>
<li>3.如果信息无误，写入数据库中</li>
</ul>
<p>代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">if(path === &apos;/sign_up&apos; &amp;&amp; method === &apos;POST&apos;)&#123;</span><br><span class="line">    readBody(request).then((body)=&gt;&#123;</span><br><span class="line">      let strings = body.split(&apos;&amp;&apos;) // [&apos;email=1&apos;, &apos;password=2&apos;, &apos;password_confirmation=3&apos;]</span><br><span class="line">      let hash = &#123;&#125;</span><br><span class="line">      strings.forEach((string)=&gt;&#123;</span><br><span class="line">        // string == &apos;email=1&apos;</span><br><span class="line">        let parts = string.split(&apos;=&apos;) // [&apos;email&apos;, &apos;1&apos;]</span><br><span class="line">        let key = parts[0]</span><br><span class="line">        let value = parts[1]</span><br><span class="line">        hash[key] = decodeURIComponent(value) // hash[&apos;email&apos;] = &apos;1&apos;</span><br><span class="line">      &#125;)</span><br><span class="line">      let &#123;email, password, password_confirmation&#125; = hash</span><br><span class="line">      if(email.indexOf(&apos;@&apos;) === -1)&#123;</span><br><span class="line">        response.statusCode = 400</span><br><span class="line">        response.setHeader(&apos;Content-Type&apos;, &apos;application/json;charset=utf-8&apos;)</span><br><span class="line">        response.write(`&#123;</span><br><span class="line">          &quot;errors&quot;: &#123;</span><br><span class="line">            &quot;email&quot;: &quot;invalid&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;`)</span><br><span class="line">      &#125;else if(password !== password_confirmation)&#123;</span><br><span class="line">        response.statusCode = 400</span><br><span class="line">        response.write(&apos;password not match&apos;)</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        var users = fs.readFileSync(&apos;./db/users&apos;, &apos;utf8&apos;)</span><br><span class="line">        try&#123;</span><br><span class="line">          users = JSON.parse(users) // []</span><br><span class="line">        &#125;catch(exception)&#123;</span><br><span class="line">          users = []</span><br><span class="line">        &#125;</span><br><span class="line">        let inUse = false</span><br><span class="line">        for(let i=0; i&lt;users.length; i++)&#123;</span><br><span class="line">          let user = users[i]</span><br><span class="line">          if(user.email === email)&#123;</span><br><span class="line">            inUse = true</span><br><span class="line">            break;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if(inUse)&#123;</span><br><span class="line">          response.statusCode = 400</span><br><span class="line">          response.write(&apos;email in use&apos;)</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">          users.push(&#123;email: email, password: password&#125;)</span><br><span class="line">          var usersString = JSON.stringify(users)</span><br><span class="line">          fs.writeFileSync(&apos;./db/users&apos;, usersString)</span><br><span class="line">          response.statusCode = 200</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      response.end()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  //因为服务器发送内容是分段的，所以，需要将接收到的信息拼接到一起</span><br><span class="line">  function readBody(request)&#123;</span><br><span class="line">  return new Promise((resolve, reject)=&gt;&#123;</span><br><span class="line">    let body = []</span><br><span class="line">    request.on(&apos;data&apos;, (chunk) =&gt; &#123;</span><br><span class="line">      body.push(chunk);</span><br><span class="line">    &#125;).on(&apos;end&apos;, () =&gt; &#123;</span><br><span class="line">      body = Buffer.concat(body).toString();</span><br><span class="line">      resolve(body)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>第二步：登录发送POST请求<br>代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$.post(&apos;/sign_in&apos;, hash)  </span><br><span class="line">  .then((response)=&gt;&#123;</span><br><span class="line">    window.location.href = &apos;/&apos;</span><br><span class="line">  &#125;, (request)=&gt;&#123;</span><br><span class="line">    alert(&apos;邮箱与密码不匹配&apos;)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure></p>
<p>服务器校对用户名和密码后，如果正确，使用Cookie发送用户信息<code>response.setHeader(&#39;Set-Cookie&#39;, `sign_in_email=${email}</code><br>使网页得到用户信息，并显示出来<br>完整代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">if (path === &apos;/sign_in&apos; &amp;&amp; method === &apos;POST&apos;) &#123;</span><br><span class="line">    readBody(request).then((body) =&gt; &#123;</span><br><span class="line">        let strings = body.split(&apos;&amp;&apos;) // [&apos;email=1&apos;, &apos;password=2&apos;, &apos;password_confirmation=3&apos;]</span><br><span class="line">        let hash = &#123;&#125;</span><br><span class="line">        strings.forEach((string) =&gt; &#123;</span><br><span class="line">            // string == &apos;email=1&apos;</span><br><span class="line">            let parts = string.split(&apos;=&apos;) // [&apos;email&apos;, &apos;1&apos;]</span><br><span class="line">            let key = parts[0]</span><br><span class="line">            let value = parts[1]</span><br><span class="line">            hash[key] = decodeURIComponent(value) // hash[&apos;email&apos;] = &apos;1&apos;</span><br><span class="line">        &#125;)</span><br><span class="line">        let &#123; email, password &#125; = hash</span><br><span class="line">        var users = fs.readFileSync(&apos;./db/users&apos;, &apos;utf8&apos;)</span><br><span class="line">        try &#123;</span><br><span class="line">            users = JSON.parse(users) // []</span><br><span class="line">        &#125; catch (exception) &#123;</span><br><span class="line">            users = []</span><br><span class="line">        &#125;</span><br><span class="line">        let found</span><br><span class="line">        for (let i = 0; i &lt; users.length; i++) &#123;</span><br><span class="line">            if (users[i].email === email &amp;&amp; users[i].password === password) &#123;</span><br><span class="line">                found = true</span><br><span class="line">                break</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (found) &#123;</span><br><span class="line">            response.setHeader(&apos;Set-Cookie&apos;, `sign_in_email=$&#123;email&#125;`)</span><br><span class="line">            response.statusCode = 200</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            response.statusCode = 401</span><br><span class="line">        &#125;</span><br><span class="line">        response.end()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>以上即为登录注册及Cookie的基本使用细节。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/25/登录注册与Cookie/" data-id="cjkkx9pkd000htlf4etm7dzj8" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-异步与回调" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/24/异步与回调/" class="article-date">
  <time datetime="2018-05-24T01:20:03.000Z" itemprop="datePublished">2018-05-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/24/异步与回调/">异步与回调</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>JavaScript是单线程的。异步，如果理解为多线程，同时在跑多个程序的话，那么，就跑偏了。</p>
<p>那如何理解异步呢。</p>
<p>比如有三个function:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function f1()&#123;</span><br><span class="line">  console.log(1)</span><br><span class="line">&#125;</span><br><span class="line">function f2()&#123;</span><br><span class="line">  console.log(2)</span><br><span class="line">&#125;</span><br><span class="line">function f3()&#123;</span><br><span class="line">  console.log(3)</span><br><span class="line">&#125;</span><br><span class="line">f1()</span><br><span class="line">f2()</span><br><span class="line">f3()</span><br></pre></td></tr></table></figure></p>
<p>三个函数会按顺序依次打印：1，2，3，就像依次走过一列火车上的三节车厢</p>
<p>那什么是异步呢？</p>
<p>同步：一定要等任务执行完了，得到结果，才执行下一个任务。</p>
<p>异步：不等任务执行完，直接执行下一个任务。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function taskAsync = function()&#123;</span><br><span class="line">  var result = setTimeout(function()&#123;</span><br><span class="line">    console.log(&apos;异步任务的结果&apos;)</span><br><span class="line">  &#125;, 3000)</span><br><span class="line">  return result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var result = taskAsync() // result 不是异步任务的结果，而是一个 timer id</span><br><span class="line">otherTask()              // 立即执行其他任务，不等异步任务结束</span><br></pre></td></tr></table></figure></p>
<p>我们拿到的 result 不是异步执行的结果，而是一个 timer id，那么要怎么拿到异步任务的结果呢？</p>
<p>用回调。</p>
<p>改下代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function taskAsync = function(callback)&#123;</span><br><span class="line">  var result = setTimeout(function()&#123;</span><br><span class="line">    callback(&apos;异步任务的结果&apos;)</span><br><span class="line">  &#125;, 3000)</span><br><span class="line">  return result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">taskAsync(function callback(result)&#123;</span><br><span class="line">  console.log(result) // 三秒钟后，这个 callback 函数会被执行</span><br><span class="line">&#125;)</span><br><span class="line">otherTask()              // 立即执行其他任务，不等异步任务结束</span><br></pre></td></tr></table></figure></p>
<p>所以“回调”经常用于获取“异步任务”的结果。</p>
<p>而如何在等待异步任务结束后立即执行一个函数呢，只要将回调函数，放在异步任务结束处即可，比如放在clearInterval()后。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function writeCode(options,fn) &#123;</span><br><span class="line">    if (options) &#123;</span><br><span class="line">      window.clearInterval(timerId)</span><br><span class="line">       fn();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, 10);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>异步，可以理解为一辆火车，确定的函数放在前头，而异步或按时间或按进程放在该放在的第n节车厢执行。但那节车厢只能放置异步，不能放置其他函数。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/24/异步与回调/" data-id="cjkkx9pkc000gtlf4mr597ziv" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-AJAX" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/17/AJAX/" class="article-date">
  <time datetime="2018-05-17T02:28:40.000Z" itemprop="datePublished">2018-05-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/17/AJAX/">AJAX</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="34-高级：AJAX-是什么鬼"><a href="#34-高级：AJAX-是什么鬼" class="headerlink" title="34 高级：AJAX 是什么鬼"></a>34 高级：AJAX 是什么鬼</h1><h2 id="如何发请求？"><a href="#如何发请求？" class="headerlink" title="如何发请求？"></a>如何发请求？</h2><h6 id="用-form-可以发请求，但是会刷新页面或新开页面"><a href="#用-form-可以发请求，但是会刷新页面或新开页面" class="headerlink" title="用 form 可以发请求，但是会刷新页面或新开页面"></a>用 form 可以发请求，但是会刷新页面或新开页面</h6><h6 id="用-a-可以发-get-请求，但是也会刷新页面或新开页面"><a href="#用-a-可以发-get-请求，但是也会刷新页面或新开页面" class="headerlink" title="用 a 可以发 get 请求，但是也会刷新页面或新开页面"></a>用 a 可以发 get 请求，但是也会刷新页面或新开页面</h6><h6 id="用-img-可以发-get-请求，但是只能以图片的形式展示"><a href="#用-img-可以发-get-请求，但是只能以图片的形式展示" class="headerlink" title="用 img 可以发 get 请求，但是只能以图片的形式展示"></a>用 img 可以发 get 请求，但是只能以图片的形式展示</h6><h6 id="用-link-可以发-get-请求，但是只能以-CSS、favicon-的形式展示"><a href="#用-link-可以发-get-请求，但是只能以-CSS、favicon-的形式展示" class="headerlink" title="用 link 可以发 get 请求，但是只能以 CSS、favicon 的形式展示"></a>用 link 可以发 get 请求，但是只能以 CSS、favicon 的形式展示</h6><h6 id="用-script-可以发-get-请求，但是只能以脚本的形式运行"><a href="#用-script-可以发-get-请求，但是只能以脚本的形式运行" class="headerlink" title="用 script 可以发 get 请求，但是只能以脚本的形式运行"></a>用 script 可以发 get 请求，但是只能以脚本的形式运行</h6><h2 id="有没有什么方式可以实现"><a href="#有没有什么方式可以实现" class="headerlink" title="有没有什么方式可以实现"></a>有没有什么方式可以实现</h2><ol>
<li>get、post、put、delete 请求都行</li>
<li>想以什么形式展示就以什么形式展示</li>
</ol>
<h2 id="微软的突破"><a href="#微软的突破" class="headerlink" title="微软的突破"></a>微软的突破</h2><h6 id="IE-5-率先在-JS-中引入-ActiveX-对象（API），使得-JS-可以直接发起-HTTP-请求。"><a href="#IE-5-率先在-JS-中引入-ActiveX-对象（API），使得-JS-可以直接发起-HTTP-请求。" class="headerlink" title="IE 5 率先在 JS 中引入 ActiveX 对象（API），使得 JS 可以直接发起 HTTP 请求。"></a>IE 5 率先在 JS 中引入 ActiveX 对象（API），使得 JS 可以直接发起 HTTP 请求。</h6><h6 id="随后-Mozilla、-Safari、-Opera-也跟进（抄袭）了，取名-XMLHttpRequest，并被纳入-W3C-规范"><a href="#随后-Mozilla、-Safari、-Opera-也跟进（抄袭）了，取名-XMLHttpRequest，并被纳入-W3C-规范" class="headerlink" title="随后 Mozilla、 Safari、 Opera 也跟进（抄袭）了，取名 XMLHttpRequest，并被纳入 W3C 规范"></a>随后 Mozilla、 Safari、 Opera 也跟进（抄袭）了，取名 XMLHttpRequest，并被纳入 W3C 规范</h6><h2 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h2><h6 id="Jesse-James-Garrett-讲如下技术取名叫做-AJAX：异步的-JavaScript-和-XML"><a href="#Jesse-James-Garrett-讲如下技术取名叫做-AJAX：异步的-JavaScript-和-XML" class="headerlink" title="Jesse James Garrett 讲如下技术取名叫做 AJAX：异步的 JavaScript 和 XML"></a>Jesse James Garrett 讲如下技术取名叫做 AJAX：异步的 JavaScript 和 XML</h6><ol>
<li>使用 XMLHttpRequest 发请求</li>
<li>服务器返回 XML 格式的字符串</li>
<li>JS 解析 XML，并更新局部页面</li>
</ol>
<p><img src="/2018/05/17/AJAX/a1.png" alt=""></p>
<h1 id="35高级：自己实现-AJAX"><a href="#35高级：自己实现-AJAX" class="headerlink" title="35高级：自己实现 AJAX"></a>35高级：自己实现 AJAX</h1><h4 id="添加ajax的内存图"><a href="#添加ajax的内存图" class="headerlink" title="添加ajax的内存图"></a>添加ajax的内存图</h4><p><img src="/2018/05/17/AJAX/a2.png" alt=""></p>
<h4 id="ES6语法"><a href="#ES6语法" class="headerlink" title="ES6语法"></a>ES6语法</h4><p><img src="/2018/05/17/AJAX/a3.png" alt=""><br><img src="/2018/05/17/AJAX/a4.png" alt=""><br><img src="/2018/05/17/AJAX/a5.png" alt=""><br><img src="/2018/05/17/AJAX/a6.png" alt=""></p>
<h4 id="响应与请求的设置顺序及方法"><a href="#响应与请求的设置顺序及方法" class="headerlink" title="响应与请求的设置顺序及方法"></a>响应与请求的设置顺序及方法</h4><p><img src="/2018/05/17/AJAX/a7.png" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/17/AJAX/" data-id="cjkkx9pii0000tlf4n376o7yr" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JSONP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/13/JSONP/" class="article-date">
  <time datetime="2018-05-13T09:15:05.000Z" itemprop="datePublished">2018-05-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/13/JSONP/">JSONP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="33高级：JSONP-是什么鬼"><a href="#33高级：JSONP-是什么鬼" class="headerlink" title="33高级：JSONP 是什么鬼"></a>33高级：JSONP 是什么鬼</h1><h3 id="JSONP的完整代码演变"><a href="#JSONP的完整代码演变" class="headerlink" title="JSONP的完整代码演变"></a>JSONP的<a href="https://github.com/yingzhongbin/XDML/tree/master/server" target="_blank" rel="noopener">完整代码演变</a></h3><p><img src="/2018/05/13/JSONP/p1.png" alt=""><br><img src="/2018/05/13/JSONP/p2.png" alt=""><br><img src="/2018/05/13/JSONP/p3.png" alt=""></p>
<h3 id="面试问题：请问，为什么JSONP不支持POST请求？"><a href="#面试问题：请问，为什么JSONP不支持POST请求？" class="headerlink" title="面试问题：请问，为什么JSONP不支持POST请求？"></a>面试问题：请问，为什么JSONP不支持POST请求？</h3><h4 id="因为JSONP是通过动态创建script实现的，我们动态创建script时只能用GET，不能用POST"><a href="#因为JSONP是通过动态创建script实现的，我们动态创建script时只能用GET，不能用POST" class="headerlink" title="因为JSONP是通过动态创建script实现的，我们动态创建script时只能用GET，不能用POST"></a>因为JSONP是通过动态创建script实现的，我们动态创建script时只能用GET，不能用POST</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/13/JSONP/" data-id="cjkkx9pj50004tlf472419vt1" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-js杂七杂八" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/09/js杂七杂八/" class="article-date">
  <time datetime="2018-05-09T11:20:25.000Z" itemprop="datePublished">2018-05-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/09/js杂七杂八/">js杂七杂八</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/09/js杂七杂八/" data-id="cjkkx9pka000ftlf407p29iab" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-jQuery入门探秘-作业" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/05/jQuery入门探秘-作业/" class="article-date">
  <time datetime="2018-05-05T02:47:53.000Z" itemprop="datePublished">2018-05-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/05/jQuery入门探秘-作业/">jQuery入门探秘-作业</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="以前自学过jQuery，也碰过jQuery和dom的互相转化问题，但是并没有弄清楚。下面，来一步步探究jQuery的内在机制到底是什么？看着-“xxx”-yyy总觉得有许多疑惑。那么，就一步步来解除疑问吧。"><a href="#以前自学过jQuery，也碰过jQuery和dom的互相转化问题，但是并没有弄清楚。下面，来一步步探究jQuery的内在机制到底是什么？看着-“xxx”-yyy总觉得有许多疑惑。那么，就一步步来解除疑问吧。" class="headerlink" title="以前自学过jQuery，也碰过jQuery和dom的互相转化问题，但是并没有弄清楚。下面，来一步步探究jQuery的内在机制到底是什么？看着$(“xxx”).yyy总觉得有许多疑惑。那么，就一步步来解除疑问吧。"></a>以前自学过jQuery，也碰过jQuery和dom的互相转化问题，但是并没有弄清楚。下面，来一步步探究jQuery的内在机制到底是什么？看着<code>$(“xxx”).yyy</code>总觉得有许多疑惑。那么，就一步步来解除疑问吧。</h4><h4 id="首先，先写出一个API"><a href="#首先，先写出一个API" class="headerlink" title="首先，先写出一个API"></a>首先，先写出一个API</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function addClass(nodes,value)&#123;</span><br><span class="line">    for(let i = 0;i&lt;nodes.length;i++)&#123;</span><br><span class="line">        nodes[i].classList.add(value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">function setText(nodes,text)&#123;</span><br><span class="line">    for(let i = 0;i&lt;nodes.length;i++)&#123;</span><br><span class="line">        nodes[i].textContent = text;</span><br><span class="line">    &#125;     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="这些简单的代码，只要对js有些了解都能看懂。"><a href="#这些简单的代码，只要对js有些了解都能看懂。" class="headerlink" title="这些简单的代码，只要对js有些了解都能看懂。"></a>这些简单的代码，只要对js有些了解都能看懂。</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//写出一个命名空间</span><br><span class="line">window.dom = &#123;&#125;</span><br><span class="line">dom.addClass = addClass;</span><br><span class="line">dom.setText = setText;</span><br></pre></td></tr></table></figure>
<h4 id="开辟一个命名空间能将所有API绑到一处。但是还是与jQuery不同，怎么办呢。"><a href="#开辟一个命名空间能将所有API绑到一处。但是还是与jQuery不同，怎么办呢。" class="headerlink" title="开辟一个命名空间能将所有API绑到一处。但是还是与jQuery不同，怎么办呢。"></a>开辟一个命名空间能将所有API绑到一处。但是还是与jQuery不同，怎么办呢。</h4><h4 id="而且，addClass-value-setText-text-看起来更方便。"><a href="#而且，addClass-value-setText-text-看起来更方便。" class="headerlink" title="而且，addClass(value)  setText(text)看起来更方便。"></a>而且，<code>addClass(value)  setText(text)</code>看起来更方便。</h4><h4 id="那么，我们可以在Node的原型上绑定addClass-和setText-方法"><a href="#那么，我们可以在Node的原型上绑定addClass-和setText-方法" class="headerlink" title="那么，我们可以在Node的原型上绑定addClass()和setText()方法"></a>那么，我们可以在Node的原型上绑定addClass()和setText()方法</h4><h4 id="如下："><a href="#如下：" class="headerlink" title="如下："></a>如下：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Node.prototype.addClass = function(value)&#123;</span><br><span class="line">    for(let i = 0;i&lt;nodes.length;i++)&#123;</span><br><span class="line">        nodes[i].classList.add(value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Node.prototype.setText = function(text)&#123;</span><br><span class="line">     for(let i = 0;i&lt;nodes.length;i++)&#123;</span><br><span class="line">         nodes[i].textContent = text;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="看起来是不是顺眼很多了"><a href="#看起来是不是顺眼很多了" class="headerlink" title="看起来是不是顺眼很多了"></a>看起来是不是顺眼很多了</h4><h4 id="但是这样随便改变原型链也有潜在的风险"><a href="#但是这样随便改变原型链也有潜在的风险" class="headerlink" title="但是这样随便改变原型链也有潜在的风险"></a>但是这样随便改变原型链也有潜在的风险</h4><h4 id="所以，继续使用命名空间方案-但是改动了一下"><a href="#所以，继续使用命名空间方案-但是改动了一下" class="headerlink" title="所以，继续使用命名空间方案,但是改动了一下"></a>所以，继续使用命名空间方案,但是改动了一下</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function Node2(node)&#123;</span><br><span class="line">     return &#123;</span><br><span class="line">         element: node,</span><br><span class="line">         addClass: function()&#123;</span><br><span class="line"></span><br><span class="line">         &#125;,</span><br><span class="line">         setText: function()&#123;</span><br><span class="line"></span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> let node =document.getElementById(&apos;x&apos;)</span><br><span class="line"> let node2 = Node2(node)</span><br><span class="line"> </span><br><span class="line"> node2.addClass()</span><br><span class="line"> node2.setText()</span><br></pre></td></tr></table></figure>
<h3 id="把-Node2-改个名字吧"><a href="#把-Node2-改个名字吧" class="headerlink" title="把 Node2 改个名字吧"></a>把 Node2 改个名字吧</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function jQuery(node)&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        element: node,</span><br><span class="line">        setText: function()&#123;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        addClass: function()&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">let node =document.getElementById(&apos;x&apos;)</span><br><span class="line">let node2 =jQuery(node)</span><br><span class="line">node2.setText()</span><br><span class="line">node2.addClass()</span><br></pre></td></tr></table></figure>
<h3 id="添加完整内容"><a href="#添加完整内容" class="headerlink" title="添加完整内容"></a>添加完整内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">function jQuery(nodeOrSelector)&#123;</span><br><span class="line">    let nodes;</span><br><span class="line">    if(typeof nodeOrSelector === &quot;string&quot;)&#123;</span><br><span class="line">        nodes = document.querySelectorAll(nodeOrSelector);</span><br><span class="line">        </span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        nodes = nodeOrSelector;</span><br><span class="line">    &#125;</span><br><span class="line">    // console.log(nodes);</span><br><span class="line">    return &#123;</span><br><span class="line">        element: nodes,</span><br><span class="line">        addClass: function(value)&#123;</span><br><span class="line">              for(let i = 0;i&lt;nodes.length;i++)&#123;</span><br><span class="line">                nodes[i].classList.add(value);</span><br><span class="line">              &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        setText:function(text)&#123;</span><br><span class="line">            for(let i = 0;i&lt;nodes.length;i++)&#123;</span><br><span class="line">                nodes[i].textContent = text;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var $div = jQuery(&apos;div&apos;)</span><br><span class="line">$div.addClass(&quot;red&quot;) // 可将所有 div 的 class 添加一个 red</span><br><span class="line">$div.setText(&apos;hi&apos;)</span><br></pre></td></tr></table></figure>
<h3 id="再给个缩写吧-alias"><a href="#再给个缩写吧-alias" class="headerlink" title="再给个缩写吧 alias"></a>再给个缩写吧 alias</h3><h4 id="window-jQuery"><a href="#window-jQuery" class="headerlink" title="window.$ = jQuery"></a><code>window.$ = jQuery</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">window.$ = jQuery</span><br><span class="line">var $div = $(&apos;div&apos;)</span><br><span class="line">$div.addClass(&quot;red&quot;) // 可将所有 div 的 class 添加一个 red</span><br><span class="line">$div.setText(&apos;hi&apos;) // 可将所有 div 的 textContent 变为 hi</span><br></pre></td></tr></table></figure>
<h4 id="就可以看到jQuery的基本面貌了"><a href="#就可以看到jQuery的基本面貌了" class="headerlink" title="就可以看到jQuery的基本面貌了"></a>就可以看到jQuery的基本面貌了</h4><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h5 id="使用jQuery库后，会将原来的元素包装一番并返回。返回的对象附带许多API，这就是jQuery的大致面目。"><a href="#使用jQuery库后，会将原来的元素包装一番并返回。返回的对象附带许多API，这就是jQuery的大致面目。" class="headerlink" title="使用jQuery库后，会将原来的元素包装一番并返回。返回的对象附带许多API，这就是jQuery的大致面目。"></a>使用jQuery库后，会将原来的元素包装一番并返回。返回的对象附带许多API，这就是jQuery的大致面目。</h5>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/05/jQuery入门探秘-作业/" data-id="cjkkx9pk7000ctlf4iyuw236m" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-DOM事件模型" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/02/DOM事件模型/" class="article-date">
  <time datetime="2018-05-02T01:30:00.000Z" itemprop="datePublished">2018-05-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/02/DOM事件模型/">DOM事件模型</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="全局变量可耻，不能用。"><a href="#全局变量可耻，不能用。" class="headerlink" title="全局变量可耻，不能用。"></a>全局变量可耻，不能用。</h4><h4 id="不用全局对象，用局部变量"><a href="#不用全局对象，用局部变量" class="headerlink" title="不用全局对象，用局部变量"></a>不用全局对象，用局部变量</h4><h4 id="声明函数立即调用，即为局部变量"><a href="#声明函数立即调用，即为局部变量" class="headerlink" title="声明函数立即调用，即为局部变量"></a>声明函数立即调用，即为局部变量</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">function()&#123;</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure>
<h4 id="但是浏览器会报错，有几种改法"><a href="#但是浏览器会报错，有几种改法" class="headerlink" title="但是浏览器会报错，有几种改法"></a>但是浏览器会报错，有几种改法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">1.</span><br><span class="line">(function()&#123;</span><br><span class="line">&#125;())</span><br><span class="line">2.</span><br><span class="line">(function()&#123;</span><br><span class="line">&#125;)()</span><br><span class="line">3.</span><br><span class="line">+function()&#123;</span><br><span class="line">&#125;()</span><br><span class="line">4.</span><br><span class="line">-function()&#123;</span><br><span class="line">&#125;()</span><br><span class="line">5.</span><br><span class="line">!function()&#123;</span><br><span class="line">&#125;()</span><br><span class="line">6. </span><br><span class="line">~function()&#123;</span><br><span class="line">&#125;()</span><br><span class="line">ES6</span><br><span class="line">&#123;</span><br><span class="line">	let parent = </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="let逃不出-的范围，在-之外无法调用let声明的变量"><a href="#let逃不出-的范围，在-之外无法调用let声明的变量" class="headerlink" title="let逃不出{ }的范围，在{}之外无法调用let声明的变量"></a>let逃不出{ }的范围，在{}之外无法调用let声明的变量</h4><h4 id="HTML的onclick里选择B-C写法正确，JS里的onclick里选择A写法正确"><a href="#HTML的onclick里选择B-C写法正确，JS里的onclick里选择A写法正确" class="headerlink" title="HTML的onclick里选择B,C写法正确，JS里的onclick里选择A写法正确"></a>HTML的onclick里选择B,C写法正确，JS里的onclick里选择A写法正确</h4><p><img src="/2018/05/02/DOM事件模型/i1.png" alt=""></p>
<h2 id="DOM事件"><a href="#DOM事件" class="headerlink" title="DOM事件"></a>DOM事件</h2><h4 id="DOM0是W3C还没有设定标准的民间事件集合-比如："><a href="#DOM0是W3C还没有设定标准的民间事件集合-比如：" class="headerlink" title="DOM0是W3C还没有设定标准的民间事件集合 比如："></a>DOM0是W3C还没有设定标准的民间事件集合 比如：</h4><ul>
<li>onclick </li>
<li>onerror</li>
<li>onload </li>
<li>onmouseenter<h4 id="但这种属性设定具有唯一性，可被覆盖"><a href="#但这种属性设定具有唯一性，可被覆盖" class="headerlink" title="但这种属性设定具有唯一性，可被覆盖"></a>但这种属性设定具有唯一性，可被覆盖</h4><img src="/2018/05/02/DOM事件模型/i2.png" alt=""><h4 id="到了DOM2-加了addEventListener"><a href="#到了DOM2-加了addEventListener" class="headerlink" title="到了DOM2 加了addEventListener"></a>到了DOM2 加了addEventListener</h4><img src="/2018/05/02/DOM事件模型/i3.png" alt=""><h4 id="addEventListener的添加是队列式的，不会产生覆盖"><a href="#addEventListener的添加是队列式的，不会产生覆盖" class="headerlink" title="addEventListener的添加是队列式的，不会产生覆盖"></a>addEventListener的添加是队列式的，不会产生覆盖</h4><h4 id="jQuery-里的one-的理解可参照下图"><a href="#jQuery-里的one-的理解可参照下图" class="headerlink" title="jQuery 里的one()的理解可参照下图"></a>jQuery 里的one()的理解可参照下图</h4><img src="/2018/05/02/DOM事件模型/i4.png" alt=""><h4 id="事件冒泡和事件捕获"><a href="#事件冒泡和事件捕获" class="headerlink" title="事件冒泡和事件捕获"></a>事件冒泡和事件捕获</h4><img src="/2018/05/02/DOM事件模型/i6.png" alt=""><br><img src="/2018/05/02/DOM事件模型/i5.png" alt=""><h4 id="直接触发到点击元素本身时，触发与代码顺序有关"><a href="#直接触发到点击元素本身时，触发与代码顺序有关" class="headerlink" title="直接触发到点击元素本身时，触发与代码顺序有关"></a>直接触发到点击元素本身时，触发与代码顺序有关</h4><img src="/2018/05/02/DOM事件模型/i6.png" alt=""><br><img src="/2018/05/02/DOM事件模型/i7.png" alt=""></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/02/DOM事件模型/" data-id="cjkkx9piv0002tlf4ahvyvwco" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-jQuery入门探秘" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/04/27/jQuery入门探秘/" class="article-date">
  <time datetime="2018-04-27T13:00:39.000Z" itemprop="datePublished">2018-04-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/04/27/jQuery入门探秘/">jQuery入门探秘</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="以前自学过jQuery，也碰过jQuery和dom的互相转化问题，但是并没有弄清楚。下面，来一步步探究jQuery的内在机制到底是什么？看着-“xxx”-yyy总觉得有许多疑惑。那么，就一步步来解除疑问吧。"><a href="#以前自学过jQuery，也碰过jQuery和dom的互相转化问题，但是并没有弄清楚。下面，来一步步探究jQuery的内在机制到底是什么？看着-“xxx”-yyy总觉得有许多疑惑。那么，就一步步来解除疑问吧。" class="headerlink" title="以前自学过jQuery，也碰过jQuery和dom的互相转化问题，但是并没有弄清楚。下面，来一步步探究jQuery的内在机制到底是什么？看着$(“xxx”).yyy总觉得有许多疑惑。那么，就一步步来解除疑问吧。"></a>以前自学过jQuery，也碰过jQuery和dom的互相转化问题，但是并没有弄清楚。下面，来一步步探究jQuery的内在机制到底是什么？看着<code>$(“xxx”).yyy</code>总觉得有许多疑惑。那么，就一步步来解除疑问吧。</h4><h4 id="首先，先写出一个API"><a href="#首先，先写出一个API" class="headerlink" title="首先，先写出一个API"></a>首先，先写出一个API</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function getSiblings(node)&#123;</span><br><span class="line">  var allChildren = node.parentNode.children</span><br><span class="line"></span><br><span class="line">  var array = &#123;</span><br><span class="line">    length: 0</span><br><span class="line">  &#125;</span><br><span class="line">  for (let i = 0; i &lt; allChildren.length; i++) &#123;</span><br><span class="line">    if (allChildren[i] !== node) &#123;</span><br><span class="line">      array[array.length] = allChildren[i]</span><br><span class="line">      array.length += 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return array</span><br><span class="line">&#125;</span><br><span class="line">console.dir(getSiblings(item3))</span><br></pre></td></tr></table></figure>
<h4 id="这些简单的代码，只要对js有些了解都能看懂。"><a href="#这些简单的代码，只要对js有些了解都能看懂。" class="headerlink" title="这些简单的代码，只要对js有些了解都能看懂。"></a>这些简单的代码，只要对js有些了解都能看懂。</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//写出一个命名空间</span><br><span class="line">window.dom = &#123;&#125;</span><br><span class="line">dom.getSiblings = getSiblings;</span><br><span class="line">console.log(dom.getSiblings(item3))</span><br></pre></td></tr></table></figure>
<h4 id="开辟一个命名空间能将所有API绑到一处。但是还是与jQuery不同，怎么办呢。"><a href="#开辟一个命名空间能将所有API绑到一处。但是还是与jQuery不同，怎么办呢。" class="headerlink" title="开辟一个命名空间能将所有API绑到一处。但是还是与jQuery不同，怎么办呢。"></a>开辟一个命名空间能将所有API绑到一处。但是还是与jQuery不同，怎么办呢。</h4><h4 id="而且，getSiblings-item3-看起来更方便。"><a href="#而且，getSiblings-item3-看起来更方便。" class="headerlink" title="而且，getSiblings(item3)看起来更方便。"></a>而且，<code>getSiblings(item3)</code>看起来更方便。</h4><h4 id="那么，我们可以在Node的原型上绑定getSiblings-方法"><a href="#那么，我们可以在Node的原型上绑定getSiblings-方法" class="headerlink" title="那么，我们可以在Node的原型上绑定getSiblings()方法"></a>那么，我们可以在Node的原型上绑定getSiblings()方法</h4><h4 id="如下：（需要使用this）"><a href="#如下：（需要使用this）" class="headerlink" title="如下：（需要使用this）"></a>如下：（需要使用this）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Node.prototype.getSiblings = function()&#123;</span><br><span class="line">  var allChildren = this.parentNode.children</span><br><span class="line">  var array = &#123;</span><br><span class="line">    length: 0</span><br><span class="line">  &#125;</span><br><span class="line">  for (let i = 0; i &lt; allChildren.length; i++) &#123;</span><br><span class="line">    if (allChildren[i] !== this) &#123;</span><br><span class="line">      array[array.length] = allChildren[i]</span><br><span class="line">      array.length += 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return array</span><br><span class="line">&#125;</span><br><span class="line">Node.prototype.addClass = function (classes) &#123;</span><br><span class="line">  classes.forEach( (value) =&gt; this.classList.add(value) )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="看起来是不是顺眼很多了"><a href="#看起来是不是顺眼很多了" class="headerlink" title="看起来是不是顺眼很多了"></a>看起来是不是顺眼很多了</h4><h4 id="但是这样随便改变原型链也有潜在的风险"><a href="#但是这样随便改变原型链也有潜在的风险" class="headerlink" title="但是这样随便改变原型链也有潜在的风险"></a>但是这样随便改变原型链也有潜在的风险</h4><h4 id="所以，继续使用命名空间方案-但是改动了一下"><a href="#所以，继续使用命名空间方案-但是改动了一下" class="headerlink" title="所以，继续使用命名空间方案,但是改动了一下"></a>所以，继续使用命名空间方案,但是改动了一下</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function Node2(node)&#123;</span><br><span class="line">     return &#123;</span><br><span class="line">         element: node,</span><br><span class="line">         getSiblings: function()&#123;</span><br><span class="line"></span><br><span class="line">         &#125;,</span><br><span class="line">         addClass: function()&#123;</span><br><span class="line"></span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> let node =document.getElementById(&apos;x&apos;)</span><br><span class="line"> let node2 = Node2(node)</span><br><span class="line"> node2.getSiblings()</span><br><span class="line"> node2.addClass()</span><br></pre></td></tr></table></figure>
<h3 id="把-Node2-改个名字吧"><a href="#把-Node2-改个名字吧" class="headerlink" title="把 Node2 改个名字吧"></a>把 Node2 改个名字吧</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function jQuery(node)&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        element: node,</span><br><span class="line">        getSiblings: function()&#123;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        addClass: function()&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">let node =document.getElementById(&apos;x&apos;)</span><br><span class="line">let node2 =jQuery(node)</span><br><span class="line">node2.getSiblings()</span><br><span class="line">node2.addClass()</span><br></pre></td></tr></table></figure>
<h3 id="添加完整内容"><a href="#添加完整内容" class="headerlink" title="添加完整内容"></a>添加完整内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">function jQuery(nodeOrSelector)&#123;</span><br><span class="line">    let node;</span><br><span class="line">    if(typeof nodeOrSelector === &quot;string&quot;)&#123;</span><br><span class="line">        node = document.querySelector(nodeOrSelector);</span><br><span class="line">        </span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        node = nodeOrSelector;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(node);</span><br><span class="line">    return &#123;</span><br><span class="line">        element: node,</span><br><span class="line">        getSiblings: function()&#123;</span><br><span class="line">            console.log(node.parentNode.children)</span><br><span class="line">            var allChildren = node.parentNode.children</span><br><span class="line">            var array = &#123;</span><br><span class="line">                length: 0</span><br><span class="line">            &#125;</span><br><span class="line">            for (let i = 0; i &lt; allChildren.length; i++) &#123;</span><br><span class="line">                if (allChildren[i] !== this) &#123;</span><br><span class="line">                array[array.length] = allChildren[i]</span><br><span class="line">                array.length += 1</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            return array</span><br><span class="line">        &#125;,</span><br><span class="line">        addClass: function(classes)&#123;</span><br><span class="line">            classes.forEach((value) =&gt; node.classList.add(value)</span><br><span class="line">            );</span><br><span class="line">        &#125;,</span><br><span class="line">        setText:function(text)&#123;</span><br><span class="line">            node.textContent = text;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">let node = jQuery(&quot;ul li:nth-child(3)&quot;)</span><br><span class="line">console.log(node.getSiblings())</span><br><span class="line">node.addClass([&quot;red&quot;,&quot;green&quot;])</span><br><span class="line">node.setText(&quot;hi&quot;)</span><br></pre></td></tr></table></figure>
<h3 id="再给个缩写吧-alias"><a href="#再给个缩写吧-alias" class="headerlink" title="再给个缩写吧 alias"></a>再给个缩写吧 alias</h3><h4 id="window-jQuery"><a href="#window-jQuery" class="headerlink" title="window.$ = jQuery"></a><code>window.$ = jQuery</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">window.$ = jQuery</span><br><span class="line">node = $(&quot;ul li:nth-child(3)&quot;)</span><br><span class="line">console.log(node.getSiblings())</span><br><span class="line">node.addClass([&quot;red&quot;,&quot;green&quot;])</span><br><span class="line">node.setText(&quot;hi&quot;)</span><br></pre></td></tr></table></figure>
<h4 id="就可以看到jQuery的基本面貌了"><a href="#就可以看到jQuery的基本面貌了" class="headerlink" title="就可以看到jQuery的基本面貌了"></a>就可以看到jQuery的基本面貌了</h4><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><h5 id="使用jQuery库后，会将原来的元素包装一番并返回。返回的对象附带许多API，这就是jQuery的大致面目。"><a href="#使用jQuery库后，会将原来的元素包装一番并返回。返回的对象附带许多API，这就是jQuery的大致面目。" class="headerlink" title="使用jQuery库后，会将原来的元素包装一番并返回。返回的对象附带许多API，这就是jQuery的大致面目。"></a>使用jQuery库后，会将原来的元素包装一番并返回。返回的对象附带许多API，这就是jQuery的大致面目。</h5>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/04/27/jQuery入门探秘/" data-id="cjkkx9pk8000dtlf4vbe1pn81" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">weiter &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/08/08/Vue的三种通信方法/">Vue的三种通信方法</a>
          </li>
        
          <li>
            <a href="/2018/06/09/icon的各种做法/">icon的各种做法</a>
          </li>
        
          <li>
            <a href="/2018/05/25/登录注册与Cookie/">登录注册与Cookie</a>
          </li>
        
          <li>
            <a href="/2018/05/24/异步与回调/">异步与回调</a>
          </li>
        
          <li>
            <a href="/2018/05/17/AJAX/">AJAX</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 应忠彬<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>